option_settings:
  # Environment variables
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: "80"
    ENVIRONMENT: dev
    # CORS origin for the frontend (set via SSM in production)
    # CORS_ORIGIN: (configured via SSM Parameter Store)
    AWS_REGION: us-east-1

  # Health check configuration
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /health
    HealthCheckInterval: 30
    HealthCheckTimeout: 5
    UnhealthyThresholdCount: 3
    HealthyThresholdCount: 3

  # ALB configuration for WebSocket support
  aws:elasticbeanstalk:environment:
    LoadBalancerType: application

  # Enable sticky sessions for WebSocket
  aws:elbv2:listenerrule:default:
    PathPatterns: /*
    Priority: 1

  aws:elasticbeanstalk:environment:process:default:
    StickinessEnabled: true
    StickinessLBCookieDuration: 86400
